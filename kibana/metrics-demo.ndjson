{"attributes":{"controlGroupInput":{"chainingSystem":"HIERARCHICAL","controlStyle":"oneLine","ignoreParentSettingsJSON":"{\"ignoreFilters\":false,\"ignoreQuery\":false,\"ignoreTimerange\":false,\"ignoreValidations\":false}","panelsJSON":"{}","showApplySelections":false},"description":"High-cardinality label analysis","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"}}"},"optionsJSON":"{\"hidePanelTitles\":false,\"useMargins\":true,\"syncColors\":false,\"syncCursor\":true,\"syncTooltips\":false}","panelsJSON":"[{\"type\":\"lens\",\"embeddableConfig\":{\"enhancements\":{\"dynamicActions\":{\"events\":[]}},\"title\":\"Unique Label Combinations (Cardinality Proxy)\",\"syncColors\":false,\"syncCursor\":true,\"syncTooltips\":false,\"filters\":[],\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 15m\\n  AND service.name == \\\"frontend\\\"\\n  AND attributes.user_id IS NOT NULL\\n| STATS count()\\n  BY attributes.user_id, attributes.path, attributes.pod\\n| STATS unique_combinations = count()\"},\"attributes\":{\"title\":\"unique_combinations\",\"references\":[],\"state\":{\"datasourceStates\":{\"textBased\":{\"layers\":{\"9b109b88-b786-424d-87fa-4aa21e1820cd\":{\"index\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 15m\\n  AND service.name == \\\"frontend\\\"\\n  AND attributes.user_id IS NOT NULL\\n| STATS count()\\n  BY attributes.user_id, attributes.path, attributes.pod\\n| STATS unique_combinations = count()\"},\"columns\":[{\"columnId\":\"unique_combinations\",\"fieldName\":\"unique_combinations\",\"label\":\"unique_combinations\",\"customLabel\":false,\"meta\":{\"type\":\"number\",\"esType\":\"long\"},\"inMetricDimension\":true}],\"timeField\":\"@timestamp\"}},\"indexPatternRefs\":[{\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"title\":\"metrics-generic.otel-default\",\"timeField\":\"@timestamp\"}]}},\"filters\":[],\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 15m\\n  AND service.name == \\\"frontend\\\"\\n  AND attributes.user_id IS NOT NULL\\n| STATS count()\\n  BY attributes.user_id, attributes.path, attributes.pod\\n| STATS unique_combinations = count()\"},\"visualization\":{\"layerId\":\"9b109b88-b786-424d-87fa-4aa21e1820cd\",\"layerType\":\"data\",\"metricAccessor\":\"unique_combinations\"},\"adHocDataViews\":{\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\":{\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"title\":\"metrics-generic.otel-default\",\"timeFieldName\":\"@timestamp\",\"sourceFilters\":[],\"type\":\"esql\",\"fieldFormats\":{},\"runtimeFieldMap\":{},\"allowNoIndex\":false,\"name\":\"metrics-generic.otel-default\",\"allowHidden\":false,\"managed\":false}},\"needsRefresh\":false},\"visualizationType\":\"lnsMetric\",\"version\":1}},\"panelIndex\":\"4bc137c0-b0ba-4685-a9df-a3e3094b4081\",\"gridData\":{\"y\":15,\"x\":0,\"w\":24,\"h\":15,\"i\":\"4bc137c0-b0ba-4685-a9df-a3e3094b4081\"}},{\"type\":\"lens\",\"embeddableConfig\":{\"enhancements\":{\"dynamicActions\":{\"events\":[]}},\"title\":\"Top Paths (Firehose Mode)\",\"syncColors\":false,\"syncCursor\":true,\"syncTooltips\":false,\"filters\":[],\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 15m\\n  AND service.name == \\\"frontend\\\"\\n  AND attributes.path IS NOT NULL\\n  AND attributes.user_id IS NOT NULL\\n| STATS path_count = count() BY attributes.path\\n| SORT path_count DESC\\n| LIMIT 20\"},\"attributes\":{\"title\":\"Bar vertical stacked\",\"references\":[],\"state\":{\"datasourceStates\":{\"textBased\":{\"layers\":{\"bcc5acd2-03c7-42c5-8c13-9edf22a82375\":{\"index\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 15m\\n  AND service.name == \\\"frontend\\\"\\n  AND attributes.path IS NOT NULL\\n  AND attributes.user_id IS NOT NULL\\n| STATS path_count = count() BY attributes.path\\n| SORT path_count DESC\\n| LIMIT 20\"},\"columns\":[{\"columnId\":\"path_count\",\"fieldName\":\"path_count\",\"label\":\"path_count\",\"customLabel\":false,\"meta\":{\"type\":\"number\",\"esType\":\"long\"},\"inMetricDimension\":true},{\"columnId\":\"attributes.path\",\"fieldName\":\"attributes.path\",\"label\":\"attributes.path\",\"customLabel\":false,\"meta\":{\"type\":\"string\",\"esType\":\"keyword\"}}],\"timeField\":\"@timestamp\"}},\"indexPatternRefs\":[{\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"title\":\"metrics-generic.otel-default\",\"timeField\":\"@timestamp\"}]}},\"filters\":[],\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 15m\\n  AND service.name == \\\"frontend\\\"\\n  AND attributes.path IS NOT NULL\\n  AND attributes.user_id IS NOT NULL\\n| STATS path_count = count() BY attributes.path\\n| SORT path_count DESC\\n| LIMIT 20\"},\"visualization\":{\"legend\":{\"isVisible\":true,\"position\":\"right\"},\"valueLabels\":\"hide\",\"fittingFunction\":\"Linear\",\"axisTitlesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"tickLabelsVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"labelsOrientation\":{\"x\":0,\"yLeft\":0,\"yRight\":0},\"gridlinesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"preferredSeriesType\":\"bar_stacked\",\"layers\":[{\"layerId\":\"bcc5acd2-03c7-42c5-8c13-9edf22a82375\",\"seriesType\":\"bar_stacked\",\"xAccessor\":\"attributes.path\",\"accessors\":[\"path_count\"],\"layerType\":\"data\",\"colorMapping\":{\"assignments\":[],\"specialAssignments\":[{\"rules\":[{\"type\":\"other\"}],\"color\":{\"type\":\"loop\"},\"touched\":false}],\"paletteId\":\"default\",\"colorMode\":{\"type\":\"categorical\"}}}]},\"adHocDataViews\":{\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\":{\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"title\":\"metrics-generic.otel-default\",\"timeFieldName\":\"@timestamp\",\"sourceFilters\":[],\"type\":\"esql\",\"fieldFormats\":{},\"runtimeFieldMap\":{},\"allowNoIndex\":false,\"name\":\"metrics-generic.otel-default\",\"allowHidden\":false,\"managed\":false}},\"needsRefresh\":false},\"visualizationType\":\"lnsXY\",\"version\":1}},\"panelIndex\":\"57937046-16c4-44e6-b41c-31912f576f89\",\"gridData\":{\"y\":0,\"x\":24,\"w\":24,\"h\":15,\"i\":\"57937046-16c4-44e6-b41c-31912f576f89\"}},{\"type\":\"lens\",\"embeddableConfig\":{\"enhancements\":{\"dynamicActions\":{\"events\":[]}},\"title\":\"Top User IDs (High Cardinality)\",\"syncColors\":false,\"syncCursor\":true,\"syncTooltips\":false,\"filters\":[],\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 15m\\n  AND service.name == \\\"frontend\\\"\\n  AND attributes.user_id IS NOT NULL\\n| STATS user_count = count() BY attributes.user_id\\n| SORT user_count DESC\\n| LIMIT 20\"},\"attributes\":{\"title\":\"Bar vertical stacked\",\"references\":[],\"state\":{\"visualization\":{\"legend\":{\"isVisible\":true,\"position\":\"right\"},\"valueLabels\":\"hide\",\"fittingFunction\":\"Linear\",\"axisTitlesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"tickLabelsVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"labelsOrientation\":{\"x\":0,\"yLeft\":0,\"yRight\":0},\"gridlinesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"preferredSeriesType\":\"bar_stacked\",\"layers\":[{\"layerId\":\"fbf5e8ce-adcd-4829-bf95-52c456359a50\",\"seriesType\":\"bar_stacked\",\"xAccessor\":\"attributes.user_id\",\"accessors\":[\"user_count\"],\"layerType\":\"data\",\"colorMapping\":{\"assignments\":[],\"specialAssignments\":[{\"rules\":[{\"type\":\"other\"}],\"color\":{\"type\":\"loop\"},\"touched\":false}],\"paletteId\":\"default\",\"colorMode\":{\"type\":\"categorical\"}}}]},\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 15m\\n  AND service.name == \\\"frontend\\\"\\n  AND attributes.user_id IS NOT NULL\\n| STATS user_count = count() BY attributes.user_id\\n| SORT user_count DESC\\n| LIMIT 20\"},\"filters\":[],\"datasourceStates\":{\"textBased\":{\"layers\":{\"fbf5e8ce-adcd-4829-bf95-52c456359a50\":{\"index\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 15m\\n  AND service.name == \\\"frontend\\\"\\n  AND attributes.user_id IS NOT NULL\\n| STATS user_count = count() BY attributes.user_id\\n| SORT user_count DESC\\n| LIMIT 20\"},\"columns\":[{\"columnId\":\"user_count\",\"fieldName\":\"user_count\",\"label\":\"user_count\",\"customLabel\":false,\"meta\":{\"type\":\"number\",\"esType\":\"long\",\"sourceParams\":{\"indexPattern\":\"metrics-generic.otel-default\",\"sourceField\":\"user_count\"},\"params\":{\"id\":\"number\"}},\"inMetricDimension\":true},{\"columnId\":\"attributes.user_id\",\"fieldName\":\"attributes.user_id\",\"label\":\"attributes.user_id\",\"customLabel\":false,\"meta\":{\"type\":\"string\",\"esType\":\"keyword\",\"sourceParams\":{\"indexPattern\":\"metrics-generic.otel-default\",\"sourceField\":\"attributes.user_id\"},\"params\":{\"id\":\"string\"}}}],\"timeField\":\"@timestamp\"}},\"indexPatternRefs\":[{\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"title\":\"metrics-generic.otel-default\",\"timeField\":\"@timestamp\"}]}},\"internalReferences\":[{\"type\":\"index-pattern\",\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"name\":\"textBasedLanguages-datasource-layer-fbf5e8ce-adcd-4829-bf95-52c456359a50\"}],\"adHocDataViews\":{\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\":{\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"title\":\"metrics-generic.otel-default\",\"timeFieldName\":\"@timestamp\",\"sourceFilters\":[],\"type\":\"esql\",\"fieldFormats\":{},\"runtimeFieldMap\":{},\"allowNoIndex\":false,\"name\":\"metrics-generic.otel-default\",\"allowHidden\":false,\"managed\":false}}},\"visualizationType\":\"lnsXY\",\"version\":1,\"type\":\"lens\"}},\"panelIndex\":\"5e99d3d5-6db8-4c11-950a-e45bb369deb5\",\"gridData\":{\"y\":0,\"x\":0,\"w\":24,\"h\":15,\"i\":\"5e99d3d5-6db8-4c11-950a-e45bb369deb5\"}},{\"type\":\"lens\",\"embeddableConfig\":{\"enhancements\":{\"dynamicActions\":{\"events\":[]}},\"title\":\"Top Paths (Shaped Mode)\",\"syncColors\":false,\"syncCursor\":true,\"syncTooltips\":false,\"filters\":[],\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 15m\\n  AND service.name == \\\"frontend\\\"\\n  AND attributes.path IS NOT NULL\\n  AND attributes.user_id IS NULL\\n| STATS path_count = count() BY attributes.path\\n| SORT path_count DESC\\n| LIMIT 20\"},\"attributes\":{\"title\":\"Bar vertical stacked\",\"references\":[],\"state\":{\"datasourceStates\":{\"textBased\":{\"layers\":{\"537b1138-f914-46f7-8001-8f3e64893b2f\":{\"index\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 15m\\n  AND service.name == \\\"frontend\\\"\\n  AND attributes.path IS NOT NULL\\n  AND attributes.user_id IS NULL\\n| STATS path_count = count() BY attributes.path\\n| SORT path_count DESC\\n| LIMIT 20\"},\"columns\":[{\"columnId\":\"path_count\",\"fieldName\":\"path_count\",\"label\":\"path_count\",\"customLabel\":false,\"meta\":{\"type\":\"number\",\"esType\":\"long\"},\"inMetricDimension\":true},{\"columnId\":\"attributes.path\",\"fieldName\":\"attributes.path\",\"label\":\"attributes.path\",\"customLabel\":false,\"meta\":{\"type\":\"string\",\"esType\":\"keyword\"}}],\"timeField\":\"@timestamp\"}},\"indexPatternRefs\":[{\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"title\":\"metrics-generic.otel-default\",\"timeField\":\"@timestamp\"}]}},\"filters\":[],\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 15m\\n  AND service.name == \\\"frontend\\\"\\n  AND attributes.path IS NOT NULL\\n  AND attributes.user_id IS NULL\\n| STATS path_count = count() BY attributes.path\\n| SORT path_count DESC\\n| LIMIT 20\"},\"visualization\":{\"legend\":{\"isVisible\":true,\"position\":\"right\"},\"valueLabels\":\"hide\",\"fittingFunction\":\"Linear\",\"axisTitlesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"tickLabelsVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"labelsOrientation\":{\"x\":0,\"yLeft\":0,\"yRight\":0},\"gridlinesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"preferredSeriesType\":\"bar_stacked\",\"layers\":[{\"layerId\":\"537b1138-f914-46f7-8001-8f3e64893b2f\",\"seriesType\":\"bar_stacked\",\"xAccessor\":\"attributes.path\",\"accessors\":[\"path_count\"],\"layerType\":\"data\",\"colorMapping\":{\"assignments\":[],\"specialAssignments\":[{\"rules\":[{\"type\":\"other\"}],\"color\":{\"type\":\"loop\"},\"touched\":false}],\"paletteId\":\"default\",\"colorMode\":{\"type\":\"categorical\"}}}]},\"adHocDataViews\":{\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\":{\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"title\":\"metrics-generic.otel-default\",\"timeFieldName\":\"@timestamp\",\"sourceFilters\":[],\"type\":\"esql\",\"fieldFormats\":{},\"runtimeFieldMap\":{},\"allowNoIndex\":false,\"name\":\"metrics-generic.otel-default\",\"allowHidden\":false,\"managed\":false}},\"needsRefresh\":false},\"visualizationType\":\"lnsXY\",\"version\":1}},\"panelIndex\":\"6de98ad9-e082-4435-a00b-060d4aeb3526\",\"gridData\":{\"y\":15,\"x\":24,\"w\":24,\"h\":15,\"i\":\"6de98ad9-e082-4435-a00b-060d4aeb3526\"}},{\"type\":\"lens\",\"embeddableConfig\":{\"enhancements\":{\"dynamicActions\":{\"events\":[]}},\"title\":\"Label Value Distribution\",\"syncColors\":false,\"syncCursor\":true,\"syncTooltips\":false,\"filters\":[],\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 15m\\n  AND service.name == \\\"frontend\\\"\\n| EVAL \\n    has_user_id_val = CASE(attributes.user_id IS NOT NULL, 1, 0),\\n    has_pod_val = CASE(attributes.pod IS NOT NULL, 1, 0),\\n    has_build_id_val = CASE(attributes.build_id IS NOT NULL, 1, 0),\\n    has_path_val = CASE(attributes.path IS NOT NULL, 1, 0)\\n| STATS \\n    has_user_id = sum(has_user_id_val),\\n    has_pod = sum(has_pod_val),\\n    has_build_id = sum(has_build_id_val),\\n    has_path = sum(has_path_val),\\n    total = count()\"},\"attributes\":{\"title\":\"has_user_id & has_pod & has_build_id & has_path & total of (empty)\",\"references\":[],\"state\":{\"visualization\":{\"layerId\":\"032ebb07-d6f1-44b6-98ed-1adf31df33a8\",\"layerType\":\"data\",\"columns\":[{\"columnId\":\"has_user_id\"},{\"columnId\":\"has_pod\"},{\"columnId\":\"has_build_id\"},{\"columnId\":\"has_path\"},{\"columnId\":\"total\"}]},\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 15m\\n  AND service.name == \\\"frontend\\\"\\n| EVAL \\n    has_user_id_val = CASE(attributes.user_id IS NOT NULL, 1, 0),\\n    has_pod_val = CASE(attributes.pod IS NOT NULL, 1, 0),\\n    has_build_id_val = CASE(attributes.build_id IS NOT NULL, 1, 0),\\n    has_path_val = CASE(attributes.path IS NOT NULL, 1, 0)\\n| STATS \\n    has_user_id = sum(has_user_id_val),\\n    has_pod = sum(has_pod_val),\\n    has_build_id = sum(has_build_id_val),\\n    has_path = sum(has_path_val),\\n    total = count()\"},\"filters\":[],\"datasourceStates\":{\"textBased\":{\"layers\":{\"032ebb07-d6f1-44b6-98ed-1adf31df33a8\":{\"index\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 15m\\n  AND service.name == \\\"frontend\\\"\\n| EVAL \\n    has_user_id_val = CASE(attributes.user_id IS NOT NULL, 1, 0),\\n    has_pod_val = CASE(attributes.pod IS NOT NULL, 1, 0),\\n    has_build_id_val = CASE(attributes.build_id IS NOT NULL, 1, 0),\\n    has_path_val = CASE(attributes.path IS NOT NULL, 1, 0)\\n| STATS \\n    has_user_id = sum(has_user_id_val),\\n    has_pod = sum(has_pod_val),\\n    has_build_id = sum(has_build_id_val),\\n    has_path = sum(has_path_val),\\n    total = count()\"},\"columns\":[{\"columnId\":\"has_user_id\",\"fieldName\":\"has_user_id\",\"label\":\"has_user_id\",\"customLabel\":false,\"meta\":{\"type\":\"number\",\"esType\":\"long\"},\"inMetricDimension\":true},{\"columnId\":\"has_pod\",\"fieldName\":\"has_pod\",\"label\":\"has_pod\",\"customLabel\":false,\"meta\":{\"type\":\"number\",\"esType\":\"long\"},\"inMetricDimension\":true},{\"columnId\":\"has_build_id\",\"fieldName\":\"has_build_id\",\"label\":\"has_build_id\",\"customLabel\":false,\"meta\":{\"type\":\"number\",\"esType\":\"long\"},\"inMetricDimension\":true},{\"columnId\":\"has_path\",\"fieldName\":\"has_path\",\"label\":\"has_path\",\"customLabel\":false,\"meta\":{\"type\":\"number\",\"esType\":\"long\"},\"inMetricDimension\":true},{\"columnId\":\"total\",\"fieldName\":\"total\",\"label\":\"total\",\"customLabel\":false,\"meta\":{\"type\":\"number\",\"esType\":\"long\"},\"inMetricDimension\":true}],\"timeField\":\"@timestamp\"}}}},\"internalReferences\":[{\"type\":\"index-pattern\",\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"name\":\"textBasedLanguages-datasource-layer-032ebb07-d6f1-44b6-98ed-1adf31df33a8\"}],\"adHocDataViews\":{\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\":{\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"title\":\"metrics-generic.otel-default\",\"timeFieldName\":\"@timestamp\",\"sourceFilters\":[],\"type\":\"esql\",\"fieldFormats\":{},\"runtimeFieldMap\":{},\"allowNoIndex\":false,\"name\":\"metrics-generic.otel-default\",\"allowHidden\":false,\"managed\":false}}},\"visualizationType\":\"lnsDatatable\",\"version\":1,\"type\":\"lens\"}},\"panelIndex\":\"62226a80-e957-431d-a6d7-0b070e161423\",\"gridData\":{\"y\":30,\"x\":0,\"w\":48,\"h\":13,\"i\":\"62226a80-e957-431d-a6d7-0b070e161423\"}}]","timeRestore":false,"title":"Cardinality & Cost Pressure"},"coreMigrationVersion":"8.8.0","created_at":"2026-01-11T20:25:22.931Z","created_by":"u_4aX6zCpfxbpA-y1xrGZ0lELEqt2anHwORyF1rZE1AyE_0","id":"0d18e33f-5cd6-42b5-8fe7-b31cf0079dd4","managed":false,"references":[],"type":"dashboard","typeMigrationVersion":"10.3.0","updated_at":"2026-01-11T20:40:44.790Z","updated_by":"u_4aX6zCpfxbpA-y1xrGZ0lELEqt2anHwORyF1rZE1AyE_0","version":"WzExMzE2LDFd"}
{"attributes":{"controlGroupInput":{"chainingSystem":"HIERARCHICAL","controlStyle":"oneLine","ignoreParentSettingsJSON":"{\"ignoreFilters\":false,\"ignoreQuery\":false,\"ignoreTimerange\":false,\"ignoreValidations\":false}","panelsJSON":"{}","showApplySelections":false},"description":"Side-by-side comparison of firehose vs shaped metrics.","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"}}"},"optionsJSON":"{\"hidePanelTitles\":false,\"useMargins\":true,\"syncColors\":false,\"syncCursor\":true,\"syncTooltips\":false}","panelsJSON":"[{\"type\":\"lens\",\"embeddableConfig\":{\"enhancements\":{\"dynamicActions\":{\"events\":[]}},\"title\":\"Path Cardinality: Before vs After\",\"syncColors\":false,\"syncCursor\":true,\"syncTooltips\":false,\"filters\":[],\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 30m\\n  AND service.name == \\\"frontend\\\"\\n  AND attributes.path IS NOT NULL\\n| EVAL mode = CASE(\\n    attributes.user_id IS NOT NULL, \\n    \\\"firehose\\\", \\n    \\\"shaped\\\"\\n  )\\n| STATS unique_paths = count_distinct(attributes.path)\\n  BY mode, time_bucket = bucket(@timestamp, 5m)\\n| SORT time_bucket DESC\"},\"attributes\":{\"title\":\"unique_paths over time_bucket\",\"references\":[],\"state\":{\"visualization\":{\"legend\":{\"isVisible\":true,\"position\":\"right\"},\"valueLabels\":\"hide\",\"fittingFunction\":\"Linear\",\"axisTitlesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"tickLabelsVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"labelsOrientation\":{\"x\":0,\"yLeft\":0,\"yRight\":0},\"gridlinesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"preferredSeriesType\":\"bar_stacked\",\"layers\":[{\"layerId\":\"82090f0c-c0bc-4c2b-b675-91e0bc086bb1\",\"seriesType\":\"bar\",\"xAccessor\":\"time_bucket\",\"splitAccessor\":\"mode\",\"accessors\":[\"unique_paths\"],\"layerType\":\"data\",\"colorMapping\":{\"assignments\":[],\"specialAssignments\":[{\"rules\":[{\"type\":\"other\"}],\"color\":{\"type\":\"loop\"},\"touched\":false}],\"paletteId\":\"default\",\"colorMode\":{\"type\":\"categorical\"}}}]},\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 30m\\n  AND service.name == \\\"frontend\\\"\\n  AND attributes.path IS NOT NULL\\n| EVAL mode = CASE(\\n    attributes.user_id IS NOT NULL, \\n    \\\"firehose\\\", \\n    \\\"shaped\\\"\\n  )\\n| STATS unique_paths = count_distinct(attributes.path)\\n  BY mode, time_bucket = bucket(@timestamp, 5m)\\n| SORT time_bucket DESC\"},\"filters\":[],\"datasourceStates\":{\"textBased\":{\"layers\":{\"82090f0c-c0bc-4c2b-b675-91e0bc086bb1\":{\"index\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 30m\\n  AND service.name == \\\"frontend\\\"\\n  AND attributes.path IS NOT NULL\\n| EVAL mode = CASE(\\n    attributes.user_id IS NOT NULL, \\n    \\\"firehose\\\", \\n    \\\"shaped\\\"\\n  )\\n| STATS unique_paths = count_distinct(attributes.path)\\n  BY mode, time_bucket = bucket(@timestamp, 5m)\\n| SORT time_bucket DESC\"},\"columns\":[{\"columnId\":\"unique_paths\",\"fieldName\":\"unique_paths\",\"label\":\"unique_paths\",\"customLabel\":false,\"meta\":{\"type\":\"number\",\"esType\":\"long\"},\"inMetricDimension\":true},{\"columnId\":\"mode\",\"fieldName\":\"mode\",\"label\":\"mode\",\"customLabel\":false,\"meta\":{\"type\":\"string\",\"esType\":\"keyword\"}},{\"columnId\":\"time_bucket\",\"fieldName\":\"time_bucket\",\"label\":\"time_bucket\",\"customLabel\":false,\"meta\":{\"type\":\"date\",\"esType\":\"date\"}}],\"timeField\":\"@timestamp\"}}}},\"internalReferences\":[{\"type\":\"index-pattern\",\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"name\":\"textBasedLanguages-datasource-layer-82090f0c-c0bc-4c2b-b675-91e0bc086bb1\"}],\"adHocDataViews\":{\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\":{\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"title\":\"metrics-generic.otel-default\",\"timeFieldName\":\"@timestamp\",\"sourceFilters\":[],\"type\":\"esql\",\"fieldFormats\":{},\"runtimeFieldMap\":{},\"allowNoIndex\":false,\"name\":\"metrics-generic.otel-default\",\"allowHidden\":false,\"managed\":false}}},\"visualizationType\":\"lnsXY\",\"version\":1,\"type\":\"lens\"}},\"panelIndex\":\"781088b7-6eed-48b4-9c44-f91a62482ab2\",\"gridData\":{\"y\":22,\"x\":24,\"w\":24,\"h\":15,\"i\":\"781088b7-6eed-48b4-9c44-f91a62482ab2\"}},{\"type\":\"lens\",\"embeddableConfig\":{\"enhancements\":{\"dynamicActions\":{\"events\":[]}},\"title\":\"Label Presence: Firehose vs Shaped\",\"syncColors\":false,\"syncCursor\":true,\"syncTooltips\":false,\"filters\":[],\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 2h\\n  AND service.name == \\\"frontend\\\"\\n| EVAL \\n    mode = CASE(\\n      attributes.user_id IS NOT NULL, \\n      \\\"firehose\\\", \\n      \\\"shaped\\\"\\n    ),\\n    with_user_id_val = CASE(attributes.user_id IS NOT NULL, 1, 0),\\n    with_pod_val = CASE(attributes.pod IS NOT NULL, 1, 0),\\n    with_build_id_val = CASE(attributes.build_id IS NOT NULL, 1, 0)\\n| STATS \\n    with_user_id = sum(with_user_id_val),\\n    with_pod = sum(with_pod_val),\\n    with_build_id = sum(with_build_id_val),\\n    total = count()\\n  BY mode\"},\"attributes\":{\"title\":\"with_user_id & with_pod & with_build_id & total of mode\",\"references\":[],\"state\":{\"datasourceStates\":{\"textBased\":{\"layers\":{\"f465bf8e-e16e-4ee3-a001-4b9d3e2cc7da\":{\"index\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 2h\\n  AND service.name == \\\"frontend\\\"\\n| EVAL \\n    mode = CASE(\\n      attributes.user_id IS NOT NULL, \\n      \\\"firehose\\\", \\n      \\\"shaped\\\"\\n    ),\\n    with_user_id_val = CASE(attributes.user_id IS NOT NULL, 1, 0),\\n    with_pod_val = CASE(attributes.pod IS NOT NULL, 1, 0),\\n    with_build_id_val = CASE(attributes.build_id IS NOT NULL, 1, 0)\\n| STATS \\n    with_user_id = sum(with_user_id_val),\\n    with_pod = sum(with_pod_val),\\n    with_build_id = sum(with_build_id_val),\\n    total = count()\\n  BY mode\"},\"columns\":[{\"columnId\":\"with_user_id\",\"fieldName\":\"with_user_id\",\"label\":\"with_user_id\",\"customLabel\":false,\"meta\":{\"type\":\"number\",\"esType\":\"long\"},\"inMetricDimension\":true},{\"columnId\":\"with_pod\",\"fieldName\":\"with_pod\",\"label\":\"with_pod\",\"customLabel\":false,\"meta\":{\"type\":\"number\",\"esType\":\"long\"},\"inMetricDimension\":true},{\"columnId\":\"with_build_id\",\"fieldName\":\"with_build_id\",\"label\":\"with_build_id\",\"customLabel\":false,\"meta\":{\"type\":\"number\",\"esType\":\"long\"},\"inMetricDimension\":true},{\"columnId\":\"total\",\"fieldName\":\"total\",\"label\":\"total\",\"customLabel\":false,\"meta\":{\"type\":\"number\",\"esType\":\"long\"},\"inMetricDimension\":true},{\"columnId\":\"mode\",\"fieldName\":\"mode\",\"label\":\"mode\",\"customLabel\":false,\"meta\":{\"type\":\"string\",\"esType\":\"keyword\"},\"inMetricDimension\":true}],\"timeField\":\"@timestamp\"}},\"indexPatternRefs\":[{\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"title\":\"metrics-generic.otel-default\",\"timeField\":\"@timestamp\"}]}},\"filters\":[],\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 2h\\n  AND service.name == \\\"frontend\\\"\\n| EVAL \\n    mode = CASE(\\n      attributes.user_id IS NOT NULL, \\n      \\\"firehose\\\", \\n      \\\"shaped\\\"\\n    ),\\n    with_user_id_val = CASE(attributes.user_id IS NOT NULL, 1, 0),\\n    with_pod_val = CASE(attributes.pod IS NOT NULL, 1, 0),\\n    with_build_id_val = CASE(attributes.build_id IS NOT NULL, 1, 0)\\n| STATS \\n    with_user_id = sum(with_user_id_val),\\n    with_pod = sum(with_pod_val),\\n    with_build_id = sum(with_build_id_val),\\n    total = count()\\n  BY mode\"},\"visualization\":{\"legend\":{\"isVisible\":true,\"position\":\"right\"},\"valueLabels\":\"hide\",\"fittingFunction\":\"Linear\",\"axisTitlesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"tickLabelsVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"labelsOrientation\":{\"x\":0,\"yLeft\":0,\"yRight\":0},\"gridlinesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"preferredSeriesType\":\"bar_stacked\",\"layers\":[{\"layerId\":\"f465bf8e-e16e-4ee3-a001-4b9d3e2cc7da\",\"seriesType\":\"bar_stacked\",\"xAccessor\":\"mode\",\"accessors\":[\"with_user_id\",\"with_pod\",\"with_build_id\",\"total\"],\"layerType\":\"data\",\"colorMapping\":{\"assignments\":[],\"specialAssignments\":[{\"rules\":[{\"type\":\"other\"}],\"color\":{\"type\":\"loop\"},\"touched\":false}],\"paletteId\":\"default\",\"colorMode\":{\"type\":\"categorical\"}}}]},\"adHocDataViews\":{\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\":{\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"title\":\"metrics-generic.otel-default\",\"timeFieldName\":\"@timestamp\",\"sourceFilters\":[],\"type\":\"esql\",\"fieldFormats\":{},\"runtimeFieldMap\":{},\"allowNoIndex\":false,\"name\":\"metrics-generic.otel-default\",\"allowHidden\":false,\"managed\":false}},\"needsRefresh\":false},\"visualizationType\":\"lnsXY\",\"version\":1}},\"panelIndex\":\"acb10cf0-710a-4112-8332-8d546b39280e\",\"gridData\":{\"y\":22,\"x\":0,\"w\":24,\"h\":15,\"i\":\"acb10cf0-710a-4112-8332-8d546b39280e\"}},{\"type\":\"lens\",\"embeddableConfig\":{\"enhancements\":{\"dynamicActions\":{\"events\":[]}},\"syncColors\":false,\"syncCursor\":true,\"syncTooltips\":false,\"filters\":[],\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 15m\\n  AND service.name == \\\"frontend\\\"\\n  AND attributes.user_id IS NOT NULL\\n| STATS count()\\n  BY attributes.user_id, attributes.path, attributes.pod\\n| STATS firehose_series = count()\"},\"attributes\":{\"title\":\"firehose_series\",\"references\":[],\"state\":{\"datasourceStates\":{\"textBased\":{\"layers\":{\"58e46d10-52b4-48c5-987e-f990db8d2547\":{\"index\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 15m\\n  AND service.name == \\\"frontend\\\"\\n  AND attributes.user_id IS NOT NULL\\n| STATS count()\\n  BY attributes.user_id, attributes.path, attributes.pod\\n| STATS firehose_series = count()\"},\"columns\":[{\"columnId\":\"firehose_series\",\"fieldName\":\"firehose_series\",\"label\":\"firehose_series\",\"customLabel\":false,\"meta\":{\"type\":\"number\",\"esType\":\"long\"},\"inMetricDimension\":true}],\"timeField\":\"@timestamp\"}},\"indexPatternRefs\":[{\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"title\":\"metrics-generic.otel-default\",\"timeField\":\"@timestamp\"}]}},\"filters\":[],\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 15m\\n  AND service.name == \\\"frontend\\\"\\n  AND attributes.user_id IS NOT NULL\\n| STATS count()\\n  BY attributes.user_id, attributes.path, attributes.pod\\n| STATS firehose_series = count()\"},\"visualization\":{\"layerId\":\"58e46d10-52b4-48c5-987e-f990db8d2547\",\"layerType\":\"data\",\"metricAccessor\":\"firehose_series\"},\"adHocDataViews\":{\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\":{\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"title\":\"metrics-generic.otel-default\",\"timeFieldName\":\"@timestamp\",\"sourceFilters\":[],\"type\":\"esql\",\"fieldFormats\":{},\"runtimeFieldMap\":{},\"allowNoIndex\":false,\"name\":\"metrics-generic.otel-default\",\"allowHidden\":false,\"managed\":false}},\"needsRefresh\":false},\"visualizationType\":\"lnsMetric\",\"version\":1}},\"panelIndex\":\"18001a64-922b-4272-b0c5-59b15e3b7b13\",\"gridData\":{\"y\":37,\"x\":24,\"w\":24,\"h\":15,\"i\":\"18001a64-922b-4272-b0c5-59b15e3b7b13\"}},{\"type\":\"lens\",\"embeddableConfig\":{\"enhancements\":{\"dynamicActions\":{\"events\":[]}},\"title\":\"Shaped: Unique Series\",\"syncColors\":false,\"syncCursor\":true,\"syncTooltips\":false,\"filters\":[],\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 15m\\n  AND service.name == \\\"frontend\\\"\\n  AND attributes.user_id IS NULL\\n| STATS count()\\n  BY attributes.path\\n| STATS shaped_series = count()\"},\"attributes\":{\"title\":\"shaped_series\",\"references\":[],\"state\":{\"datasourceStates\":{\"textBased\":{\"layers\":{\"8341f2ff-0ca2-4545-9b7a-cf236baaa86e\":{\"index\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 15m\\n  AND service.name == \\\"frontend\\\"\\n  AND attributes.user_id IS NULL\\n| STATS count()\\n  BY attributes.path\\n| STATS shaped_series = count()\"},\"columns\":[{\"columnId\":\"shaped_series\",\"fieldName\":\"shaped_series\",\"label\":\"shaped_series\",\"customLabel\":false,\"meta\":{\"type\":\"number\",\"esType\":\"long\"},\"inMetricDimension\":true}],\"timeField\":\"@timestamp\"}},\"indexPatternRefs\":[{\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"title\":\"metrics-generic.otel-default\",\"timeField\":\"@timestamp\"}]}},\"filters\":[],\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 15m\\n  AND service.name == \\\"frontend\\\"\\n  AND attributes.user_id IS NULL\\n| STATS count()\\n  BY attributes.path\\n| STATS shaped_series = count()\"},\"visualization\":{\"layerId\":\"8341f2ff-0ca2-4545-9b7a-cf236baaa86e\",\"layerType\":\"data\",\"metricAccessor\":\"shaped_series\"},\"adHocDataViews\":{\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\":{\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"title\":\"metrics-generic.otel-default\",\"timeFieldName\":\"@timestamp\",\"sourceFilters\":[],\"type\":\"esql\",\"fieldFormats\":{},\"runtimeFieldMap\":{},\"allowNoIndex\":false,\"name\":\"metrics-generic.otel-default\",\"allowHidden\":false,\"managed\":false}},\"needsRefresh\":false},\"visualizationType\":\"lnsMetric\",\"version\":1}},\"panelIndex\":\"a09b7c8f-387b-4315-94fa-044a15924c4d\",\"gridData\":{\"y\":37,\"x\":0,\"w\":24,\"h\":15,\"i\":\"a09b7c8f-387b-4315-94fa-044a15924c4d\"}},{\"type\":\"lens\",\"embeddableConfig\":{\"enhancements\":{\"dynamicActions\":{\"events\":[]}},\"title\":\"Reduction % Panel\",\"syncColors\":false,\"syncCursor\":true,\"syncTooltips\":false,\"filters\":[],\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 30m\\n  AND service.name == \\\"frontend\\\"\\n| EVAL mode = CASE(\\n    attributes.user_id IS NOT NULL, \\n    \\\"firehose\\\", \\n    \\\"shaped\\\"\\n  )\\n| STATS count()\\n  BY mode, attributes.user_id, attributes.path, attributes.pod\\n| STATS series_count = count() BY mode\\n| WHERE mode == \\\"firehose\\\" OR mode == \\\"shaped\\\"\\n| STATS \\n    firehose_series = max(CASE(mode == \\\"firehose\\\", series_count, null)),\\n    shaped_series = max(CASE(mode == \\\"shaped\\\", series_count, null))\\n| EVAL \\n    firehose_time_series = firehose_series,\\n    shaped_time_series = shaped_series,\\n    series_reduced = firehose_series - shaped_series,\\n    reduction_pct = ROUND(((firehose_series - shaped_series) / firehose_series) * 100, 2)\"},\"attributes\":{\"title\":\"firehose_series & shaped_series & firehose_time_series & shaped_time_series & series_reduced of (empty)\",\"references\":[],\"state\":{\"datasourceStates\":{\"textBased\":{\"layers\":{\"c1551856-92f7-476a-8569-009642fc48b8\":{\"index\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 30m\\n  AND service.name == \\\"frontend\\\"\\n| EVAL mode = CASE(\\n    attributes.user_id IS NOT NULL, \\n    \\\"firehose\\\", \\n    \\\"shaped\\\"\\n  )\\n| STATS count()\\n  BY mode, attributes.user_id, attributes.path, attributes.pod\\n| STATS series_count = count() BY mode\\n| WHERE mode == \\\"firehose\\\" OR mode == \\\"shaped\\\"\\n| STATS \\n    firehose_series = max(CASE(mode == \\\"firehose\\\", series_count, null)),\\n    shaped_series = max(CASE(mode == \\\"shaped\\\", series_count, null))\\n| EVAL \\n    firehose_time_series = firehose_series,\\n    shaped_time_series = shaped_series,\\n    series_reduced = firehose_series - shaped_series,\\n    reduction_pct = ROUND(((firehose_series - shaped_series) / firehose_series) * 100, 2)\"},\"columns\":[{\"columnId\":\"firehose_series\",\"fieldName\":\"firehose_series\",\"label\":\"firehose_series\",\"customLabel\":false,\"meta\":{\"type\":\"number\",\"esType\":\"long\"},\"inMetricDimension\":true},{\"columnId\":\"shaped_series\",\"fieldName\":\"shaped_series\",\"label\":\"shaped_series\",\"customLabel\":false,\"meta\":{\"type\":\"number\",\"esType\":\"long\"},\"inMetricDimension\":true},{\"columnId\":\"firehose_time_series\",\"fieldName\":\"firehose_time_series\",\"label\":\"firehose_time_series\",\"customLabel\":false,\"meta\":{\"type\":\"number\",\"esType\":\"long\"},\"inMetricDimension\":true},{\"columnId\":\"shaped_time_series\",\"fieldName\":\"shaped_time_series\",\"label\":\"shaped_time_series\",\"customLabel\":false,\"meta\":{\"type\":\"number\",\"esType\":\"long\"},\"inMetricDimension\":true},{\"columnId\":\"series_reduced\",\"fieldName\":\"series_reduced\",\"label\":\"series_reduced\",\"customLabel\":false,\"meta\":{\"type\":\"number\",\"esType\":\"long\"},\"inMetricDimension\":true}],\"timeField\":\"@timestamp\"}},\"indexPatternRefs\":[{\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"title\":\"metrics-generic.otel-default\",\"timeField\":\"@timestamp\"}]}},\"filters\":[],\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 30m\\n  AND service.name == \\\"frontend\\\"\\n| EVAL mode = CASE(\\n    attributes.user_id IS NOT NULL, \\n    \\\"firehose\\\", \\n    \\\"shaped\\\"\\n  )\\n| STATS count()\\n  BY mode, attributes.user_id, attributes.path, attributes.pod\\n| STATS series_count = count() BY mode\\n| WHERE mode == \\\"firehose\\\" OR mode == \\\"shaped\\\"\\n| STATS \\n    firehose_series = max(CASE(mode == \\\"firehose\\\", series_count, null)),\\n    shaped_series = max(CASE(mode == \\\"shaped\\\", series_count, null))\\n| EVAL \\n    firehose_time_series = firehose_series,\\n    shaped_time_series = shaped_series,\\n    series_reduced = firehose_series - shaped_series,\\n    reduction_pct = ROUND(((firehose_series - shaped_series) / firehose_series) * 100, 2)\"},\"visualization\":{\"legend\":{\"isVisible\":true,\"position\":\"right\"},\"valueLabels\":\"hide\",\"fittingFunction\":\"Linear\",\"axisTitlesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"tickLabelsVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"labelsOrientation\":{\"x\":0,\"yLeft\":0,\"yRight\":0},\"gridlinesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"preferredSeriesType\":\"bar\",\"layers\":[{\"layerId\":\"c1551856-92f7-476a-8569-009642fc48b8\",\"seriesType\":\"bar\",\"accessors\":[\"firehose_series\",\"shaped_series\",\"firehose_time_series\",\"shaped_time_series\",\"series_reduced\"],\"layerType\":\"data\",\"colorMapping\":{\"assignments\":[],\"specialAssignments\":[{\"rules\":[{\"type\":\"other\"}],\"color\":{\"type\":\"loop\"},\"touched\":false}],\"paletteId\":\"default\",\"colorMode\":{\"type\":\"categorical\"}}}]},\"adHocDataViews\":{\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\":{\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"title\":\"metrics-generic.otel-default\",\"timeFieldName\":\"@timestamp\",\"sourceFilters\":[],\"type\":\"esql\",\"fieldFormats\":{},\"runtimeFieldMap\":{},\"allowNoIndex\":false,\"name\":\"metrics-generic.otel-default\",\"allowHidden\":false,\"managed\":false}},\"needsRefresh\":false},\"visualizationType\":\"lnsXY\",\"version\":1}},\"panelIndex\":\"079b9ac7-ee35-4af7-9d6f-8a7e155f7eeb\",\"gridData\":{\"y\":52,\"x\":0,\"w\":48,\"h\":16,\"i\":\"079b9ac7-ee35-4af7-9d6f-8a7e155f7eeb\"}},{\"type\":\"lens\",\"embeddableConfig\":{\"enhancements\":{\"dynamicActions\":{\"events\":[]}},\"title\":\"Request Count: Firehose vs Shaped\",\"syncColors\":false,\"syncCursor\":true,\"syncTooltips\":false,\"filters\":[],\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 30m\\n  AND service.name == \\\"frontend\\\"\\n| EVAL mode = CASE(\\n    attributes.user_id IS NOT NULL, \\n    \\\"firehose\\\", \\n    \\\"shaped\\\"\\n  )\\n| STATS request_count = count()\\n  BY mode, time_bucket = bucket(@timestamp, 1m)\\n| SORT time_bucket DESC\"},\"attributes\":{\"title\":\"request_count over time_bucket\",\"references\":[],\"state\":{\"visualization\":{\"legend\":{\"isVisible\":true,\"position\":\"right\"},\"valueLabels\":\"hide\",\"fittingFunction\":\"Linear\",\"axisTitlesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"tickLabelsVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"labelsOrientation\":{\"x\":0,\"yLeft\":0,\"yRight\":0},\"gridlinesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"preferredSeriesType\":\"line\",\"layers\":[{\"layerId\":\"a89e1859-d9f3-4b0e-a82b-5db743722200\",\"seriesType\":\"line\",\"xAccessor\":\"time_bucket\",\"splitAccessor\":\"mode\",\"accessors\":[\"request_count\"],\"layerType\":\"data\",\"colorMapping\":{\"assignments\":[],\"specialAssignments\":[{\"rules\":[{\"type\":\"other\"}],\"color\":{\"type\":\"loop\"},\"touched\":false}],\"paletteId\":\"default\",\"colorMode\":{\"type\":\"categorical\"}}}]},\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 30m\\n  AND service.name == \\\"frontend\\\"\\n| EVAL mode = CASE(\\n    attributes.user_id IS NOT NULL, \\n    \\\"firehose\\\", \\n    \\\"shaped\\\"\\n  )\\n| STATS request_count = count()\\n  BY mode, time_bucket = bucket(@timestamp, 1m)\\n| SORT time_bucket DESC\"},\"filters\":[],\"datasourceStates\":{\"textBased\":{\"layers\":{\"a89e1859-d9f3-4b0e-a82b-5db743722200\":{\"index\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 30m\\n  AND service.name == \\\"frontend\\\"\\n| EVAL mode = CASE(\\n    attributes.user_id IS NOT NULL, \\n    \\\"firehose\\\", \\n    \\\"shaped\\\"\\n  )\\n| STATS request_count = count()\\n  BY mode, time_bucket = bucket(@timestamp, 1m)\\n| SORT time_bucket DESC\"},\"columns\":[{\"columnId\":\"request_count\",\"fieldName\":\"request_count\",\"label\":\"request_count\",\"customLabel\":false,\"meta\":{\"type\":\"number\",\"esType\":\"long\"},\"inMetricDimension\":true},{\"columnId\":\"mode\",\"fieldName\":\"mode\",\"label\":\"mode\",\"customLabel\":false,\"meta\":{\"type\":\"string\",\"esType\":\"keyword\"}},{\"columnId\":\"time_bucket\",\"fieldName\":\"time_bucket\",\"label\":\"time_bucket\",\"customLabel\":false,\"meta\":{\"type\":\"date\",\"esType\":\"date\"}}],\"timeField\":\"@timestamp\"}}}},\"internalReferences\":[{\"type\":\"index-pattern\",\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"name\":\"textBasedLanguages-datasource-layer-a89e1859-d9f3-4b0e-a82b-5db743722200\"}],\"adHocDataViews\":{\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\":{\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"title\":\"metrics-generic.otel-default\",\"timeFieldName\":\"@timestamp\",\"sourceFilters\":[],\"type\":\"esql\",\"fieldFormats\":{},\"runtimeFieldMap\":{},\"allowNoIndex\":false,\"name\":\"metrics-generic.otel-default\",\"allowHidden\":false,\"managed\":false}}},\"visualizationType\":\"lnsXY\",\"version\":1,\"type\":\"lens\"}},\"panelIndex\":\"959909b7-044e-41bf-a882-f4cdfb8aad89\",\"gridData\":{\"y\":0,\"x\":0,\"w\":48,\"h\":22,\"i\":\"959909b7-044e-41bf-a882-f4cdfb8aad89\"}}]","timeRestore":false,"title":"Before vs After (Firehose vs Shaped)"},"coreMigrationVersion":"8.8.0","created_at":"2026-01-11T20:53:11.542Z","created_by":"u_4aX6zCpfxbpA-y1xrGZ0lELEqt2anHwORyF1rZE1AyE_0","id":"af3a8885-8609-40be-a053-b879b915b6fc","managed":false,"references":[],"type":"dashboard","typeMigrationVersion":"10.3.0","updated_at":"2026-01-12T13:08:35.884Z","updated_by":"u_4aX6zCpfxbpA-y1xrGZ0lELEqt2anHwORyF1rZE1AyE_0","version":"WzExMzIyLDFd"}
{"attributes":{"controlGroupInput":{"chainingSystem":"HIERARCHICAL","controlStyle":"oneLine","ignoreParentSettingsJSON":"{\"ignoreFilters\":false,\"ignoreQuery\":false,\"ignoreTimerange\":false,\"ignoreValidations\":false}","panelsJSON":"{}","showApplySelections":false},"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"}}"},"optionsJSON":"{\"hidePanelTitles\":false,\"useMargins\":true,\"syncColors\":false,\"syncCursor\":true,\"syncTooltips\":false}","panelsJSON":"[{\"type\":\"lens\",\"embeddableConfig\":{\"enhancements\":{\"dynamicActions\":{\"events\":[]}},\"title\":\"Error Rate (%)\",\"syncColors\":false,\"syncCursor\":true,\"syncTooltips\":false,\"filters\":[],\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 1h\\n  AND service.name IN (\\\"frontend\\\", \\\"api\\\", \\\"worker\\\")\\n| EVAL is_error = CASE(\\n    attributes.status_code LIKE \\\"4*\\\" OR attributes.status_code LIKE \\\"5*\\\", \\n    1, \\n    0\\n  )\\n| STATS \\n    total_requests = count(),\\n    errors = sum(is_error)\\n  BY service.name, time_bucket = bucket(@timestamp, 1m)\\n| EVAL error_rate = (errors / total_requests) * 100\\n| SORT time_bucket DESC\"},\"attributes\":{\"title\":\"total_requests & errors & error_rate over time_bucket\",\"references\":[],\"state\":{\"visualization\":{\"legend\":{\"isVisible\":true,\"position\":\"right\"},\"valueLabels\":\"hide\",\"fittingFunction\":\"Linear\",\"axisTitlesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"tickLabelsVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"labelsOrientation\":{\"x\":0,\"yLeft\":0,\"yRight\":0},\"gridlinesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"preferredSeriesType\":\"line\",\"layers\":[{\"layerId\":\"eba18c38-9954-4276-a2b3-fbe60c5dec52\",\"seriesType\":\"line\",\"xAccessor\":\"time_bucket\",\"splitAccessor\":\"service.name\",\"accessors\":[\"total_requests\",\"errors\",\"error_rate\"],\"layerType\":\"data\",\"colorMapping\":{\"assignments\":[],\"specialAssignments\":[{\"rules\":[{\"type\":\"other\"}],\"color\":{\"type\":\"loop\"},\"touched\":false}],\"paletteId\":\"default\",\"colorMode\":{\"type\":\"categorical\"}}}]},\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 1h\\n  AND service.name IN (\\\"frontend\\\", \\\"api\\\", \\\"worker\\\")\\n| EVAL is_error = CASE(\\n    attributes.status_code LIKE \\\"4*\\\" OR attributes.status_code LIKE \\\"5*\\\", \\n    1, \\n    0\\n  )\\n| STATS \\n    total_requests = count(),\\n    errors = sum(is_error)\\n  BY service.name, time_bucket = bucket(@timestamp, 1m)\\n| EVAL error_rate = (errors / total_requests) * 100\\n| SORT time_bucket DESC\"},\"filters\":[],\"datasourceStates\":{\"textBased\":{\"layers\":{\"eba18c38-9954-4276-a2b3-fbe60c5dec52\":{\"index\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 1h\\n  AND service.name IN (\\\"frontend\\\", \\\"api\\\", \\\"worker\\\")\\n| EVAL is_error = CASE(\\n    attributes.status_code LIKE \\\"4*\\\" OR attributes.status_code LIKE \\\"5*\\\", \\n    1, \\n    0\\n  )\\n| STATS \\n    total_requests = count(),\\n    errors = sum(is_error)\\n  BY service.name, time_bucket = bucket(@timestamp, 1m)\\n| EVAL error_rate = (errors / total_requests) * 100\\n| SORT time_bucket DESC\"},\"columns\":[{\"columnId\":\"total_requests\",\"fieldName\":\"total_requests\",\"label\":\"Error Rate (%)\",\"customLabel\":true,\"meta\":{\"type\":\"number\",\"esType\":\"long\"},\"inMetricDimension\":true},{\"columnId\":\"errors\",\"fieldName\":\"errors\",\"label\":\"errors\",\"customLabel\":false,\"meta\":{\"type\":\"number\",\"esType\":\"long\"},\"inMetricDimension\":true},{\"columnId\":\"service.name\",\"fieldName\":\"service.name\",\"label\":\"service.name\",\"customLabel\":false,\"meta\":{\"type\":\"string\",\"esType\":\"keyword\"},\"inMetricDimension\":true},{\"columnId\":\"time_bucket\",\"fieldName\":\"time_bucket\",\"label\":\"time_bucket\",\"customLabel\":false,\"meta\":{\"type\":\"date\",\"esType\":\"date\"},\"inMetricDimension\":true},{\"columnId\":\"error_rate\",\"fieldName\":\"error_rate\",\"label\":\"error_rate\",\"customLabel\":false,\"meta\":{\"type\":\"number\",\"esType\":\"long\"},\"inMetricDimension\":true}],\"timeField\":\"@timestamp\"}}}},\"internalReferences\":[{\"type\":\"index-pattern\",\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"name\":\"textBasedLanguages-datasource-layer-eba18c38-9954-4276-a2b3-fbe60c5dec52\"}],\"adHocDataViews\":{\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\":{\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"title\":\"metrics-generic.otel-default\",\"timeFieldName\":\"@timestamp\",\"sourceFilters\":[],\"type\":\"esql\",\"fieldFormats\":{},\"runtimeFieldMap\":{},\"allowNoIndex\":false,\"name\":\"metrics-generic.otel-default\",\"allowHidden\":false,\"managed\":false}}},\"visualizationType\":\"lnsXY\",\"version\":1,\"type\":\"lens\"}},\"panelIndex\":\"64a1a73c-bbc7-469e-bb5f-4d1b70c48511\",\"gridData\":{\"y\":16,\"x\":24,\"w\":24,\"h\":15,\"i\":\"64a1a73c-bbc7-469e-bb5f-4d1b70c48511\"}},{\"type\":\"lens\",\"embeddableConfig\":{\"enhancements\":{\"dynamicActions\":{\"events\":[]}},\"title\":\"P95 Latency (ms)\",\"syncColors\":false,\"syncCursor\":true,\"syncTooltips\":false,\"filters\":[],\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 1h\\n  AND service.name IN (\\\"frontend\\\", \\\"api\\\", \\\"worker\\\")\\n| STATS \\n    request_count = count()\\n  BY service.name, time_bucket = bucket(@timestamp, 1m)\\n| SORT time_bucket DESC\"},\"attributes\":{\"title\":\"request_count over time_bucket\",\"references\":[],\"state\":{\"visualization\":{\"legend\":{\"isVisible\":true,\"position\":\"right\"},\"valueLabels\":\"hide\",\"fittingFunction\":\"Linear\",\"axisTitlesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"tickLabelsVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"labelsOrientation\":{\"x\":0,\"yLeft\":0,\"yRight\":0},\"gridlinesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"preferredSeriesType\":\"line\",\"layers\":[{\"layerId\":\"142977ee-9b9c-4088-bf84-02d19085ac32\",\"seriesType\":\"line\",\"xAccessor\":\"time_bucket\",\"splitAccessor\":\"service.name\",\"accessors\":[\"request_count\"],\"layerType\":\"data\",\"colorMapping\":{\"assignments\":[],\"specialAssignments\":[{\"rules\":[{\"type\":\"other\"}],\"color\":{\"type\":\"loop\"},\"touched\":false}],\"paletteId\":\"default\",\"colorMode\":{\"type\":\"categorical\"}}}]},\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 1h\\n  AND service.name IN (\\\"frontend\\\", \\\"api\\\", \\\"worker\\\")\\n| STATS \\n    request_count = count()\\n  BY service.name, time_bucket = bucket(@timestamp, 1m)\\n| SORT time_bucket DESC\"},\"filters\":[],\"datasourceStates\":{\"textBased\":{\"layers\":{\"142977ee-9b9c-4088-bf84-02d19085ac32\":{\"index\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 1h\\n  AND service.name IN (\\\"frontend\\\", \\\"api\\\", \\\"worker\\\")\\n| STATS \\n    request_count = count()\\n  BY service.name, time_bucket = bucket(@timestamp, 1m)\\n| SORT time_bucket DESC\"},\"columns\":[{\"columnId\":\"request_count\",\"fieldName\":\"request_count\",\"label\":\"Request Count (latency proxy)\",\"customLabel\":true,\"meta\":{\"type\":\"number\",\"esType\":\"long\"},\"inMetricDimension\":true},{\"columnId\":\"service.name\",\"fieldName\":\"service.name\",\"label\":\"service.name\",\"customLabel\":false,\"meta\":{\"type\":\"string\",\"esType\":\"keyword\"}},{\"columnId\":\"time_bucket\",\"fieldName\":\"time_bucket\",\"label\":\"time_bucket\",\"customLabel\":false,\"meta\":{\"type\":\"date\",\"esType\":\"date\"}}],\"timeField\":\"@timestamp\"}}}},\"internalReferences\":[{\"type\":\"index-pattern\",\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"name\":\"textBasedLanguages-datasource-layer-142977ee-9b9c-4088-bf84-02d19085ac32\"}],\"adHocDataViews\":{\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\":{\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"title\":\"metrics-generic.otel-default\",\"timeFieldName\":\"@timestamp\",\"sourceFilters\":[],\"type\":\"esql\",\"fieldFormats\":{},\"runtimeFieldMap\":{},\"allowNoIndex\":false,\"name\":\"metrics-generic.otel-default\",\"allowHidden\":false,\"managed\":false}}},\"visualizationType\":\"lnsXY\",\"version\":1,\"type\":\"lens\"}},\"panelIndex\":\"308aec96-9075-41b2-98bf-ed58b5677ce1\",\"gridData\":{\"y\":16,\"x\":0,\"w\":24,\"h\":15,\"i\":\"308aec96-9075-41b2-98bf-ed58b5677ce1\"}},{\"type\":\"lens\",\"embeddableConfig\":{\"enhancements\":{\"dynamicActions\":{\"events\":[]}},\"title\":\"Request Rate (req/sec)\",\"syncColors\":false,\"syncCursor\":true,\"syncTooltips\":false,\"filters\":[],\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 1h\\n  AND service.name IN (\\\"frontend\\\", \\\"api\\\", \\\"worker\\\")\\n| STATS request_count = count()\\n  BY service.name, time_bucket = bucket(@timestamp, 1m)\\n| SORT time_bucket DESC\"},\"attributes\":{\"title\":\"request_count over time_bucket\",\"references\":[],\"state\":{\"datasourceStates\":{\"textBased\":{\"layers\":{\"a45486b8-b768-4a82-9362-007f955f3d10\":{\"index\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 1h\\n  AND service.name IN (\\\"frontend\\\", \\\"api\\\", \\\"worker\\\")\\n| STATS request_count = count()\\n  BY service.name, time_bucket = bucket(@timestamp, 1m)\\n| SORT time_bucket DESC\"},\"columns\":[{\"columnId\":\"request_count\",\"fieldName\":\"request_count\",\"label\":\"Requests per Second\",\"customLabel\":true,\"meta\":{\"type\":\"number\",\"esType\":\"long\"},\"inMetricDimension\":true},{\"columnId\":\"service.name\",\"fieldName\":\"service.name\",\"label\":\"service.name\",\"customLabel\":false,\"meta\":{\"type\":\"string\",\"esType\":\"keyword\"}},{\"columnId\":\"time_bucket\",\"fieldName\":\"time_bucket\",\"label\":\"time_bucket\",\"customLabel\":false,\"meta\":{\"type\":\"date\",\"esType\":\"date\"}}],\"timeField\":\"@timestamp\"}},\"indexPatternRefs\":[{\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"title\":\"metrics-generic.otel-default\",\"timeField\":\"@timestamp\"}]}},\"filters\":[],\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 1h\\n  AND service.name IN (\\\"frontend\\\", \\\"api\\\", \\\"worker\\\")\\n| STATS request_count = count()\\n  BY service.name, time_bucket = bucket(@timestamp, 1m)\\n| SORT time_bucket DESC\"},\"visualization\":{\"legend\":{\"isVisible\":true,\"position\":\"right\"},\"valueLabels\":\"hide\",\"fittingFunction\":\"Linear\",\"axisTitlesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"tickLabelsVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"labelsOrientation\":{\"x\":0,\"yLeft\":0,\"yRight\":0},\"gridlinesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"preferredSeriesType\":\"line\",\"layers\":[{\"layerId\":\"a45486b8-b768-4a82-9362-007f955f3d10\",\"seriesType\":\"line\",\"xAccessor\":\"time_bucket\",\"splitAccessor\":\"service.name\",\"accessors\":[\"request_count\"],\"layerType\":\"data\",\"colorMapping\":{\"assignments\":[],\"specialAssignments\":[{\"rules\":[{\"type\":\"other\"}],\"color\":{\"type\":\"loop\"},\"touched\":false}],\"paletteId\":\"default\",\"colorMode\":{\"type\":\"categorical\"}}}]},\"adHocDataViews\":{\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\":{\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"title\":\"metrics-generic.otel-default\",\"timeFieldName\":\"@timestamp\",\"sourceFilters\":[],\"type\":\"esql\",\"fieldFormats\":{},\"runtimeFieldMap\":{},\"allowNoIndex\":false,\"name\":\"metrics-generic.otel-default\",\"allowHidden\":false,\"managed\":false}},\"needsRefresh\":false},\"visualizationType\":\"lnsXY\",\"version\":1}},\"panelIndex\":\"c2a111c8-6ef0-4420-9b5b-a815f45c0eb6\",\"gridData\":{\"y\":0,\"x\":0,\"w\":48,\"h\":16,\"i\":\"c2a111c8-6ef0-4420-9b5b-a815f45c0eb6\"}},{\"type\":\"lens\",\"embeddableConfig\":{\"enhancements\":{\"dynamicActions\":{\"events\":[]}},\"title\":\"Saturation (Queue Depth)\",\"syncColors\":false,\"syncCursor\":true,\"syncTooltips\":false,\"filters\":[],\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 1h\\n  AND service.name IN (\\\"frontend\\\", \\\"api\\\", \\\"worker\\\")\\n  AND metrics.queue_depth IS NOT NULL\\n| STATS avg_queue = avg(metrics.queue_depth)\\n  BY service.name, time_bucket = bucket(@timestamp, 1m)\\n| SORT time_bucket DESC\"},\"attributes\":{\"title\":\"avg_queue over time_bucket\",\"references\":[],\"state\":{\"visualization\":{\"legend\":{\"isVisible\":true,\"position\":\"right\"},\"valueLabels\":\"hide\",\"fittingFunction\":\"Linear\",\"axisTitlesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"tickLabelsVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"labelsOrientation\":{\"x\":0,\"yLeft\":0,\"yRight\":0},\"gridlinesVisibilitySettings\":{\"x\":true,\"yLeft\":true,\"yRight\":true},\"preferredSeriesType\":\"area_stacked\",\"layers\":[{\"layerId\":\"dff72890-454e-46e0-bdcf-9a6f1066ee7f\",\"seriesType\":\"area_stacked\",\"xAccessor\":\"time_bucket\",\"splitAccessor\":\"service.name\",\"accessors\":[\"avg_queue\"],\"layerType\":\"data\",\"colorMapping\":{\"assignments\":[],\"specialAssignments\":[{\"rules\":[{\"type\":\"other\"}],\"color\":{\"type\":\"loop\"},\"touched\":false}],\"paletteId\":\"default\",\"colorMode\":{\"type\":\"categorical\"}}}]},\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 1h\\n  AND service.name IN (\\\"frontend\\\", \\\"api\\\", \\\"worker\\\")\\n  AND metrics.queue_depth IS NOT NULL\\n| STATS avg_queue = avg(metrics.queue_depth)\\n  BY service.name, time_bucket = bucket(@timestamp, 1m)\\n| SORT time_bucket DESC\"},\"filters\":[],\"datasourceStates\":{\"textBased\":{\"layers\":{\"dff72890-454e-46e0-bdcf-9a6f1066ee7f\":{\"index\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"query\":{\"esql\":\"FROM metrics-generic.otel-default\\n| WHERE @timestamp >= NOW() - 1h\\n  AND service.name IN (\\\"frontend\\\", \\\"api\\\", \\\"worker\\\")\\n  AND metrics.queue_depth IS NOT NULL\\n| STATS avg_queue = avg(metrics.queue_depth)\\n  BY service.name, time_bucket = bucket(@timestamp, 1m)\\n| SORT time_bucket DESC\"},\"columns\":[{\"columnId\":\"avg_queue\",\"fieldName\":\"avg_queue\",\"label\":\"Queue Depth\",\"customLabel\":true,\"meta\":{\"type\":\"number\",\"esType\":\"double\"},\"inMetricDimension\":true},{\"columnId\":\"service.name\",\"fieldName\":\"service.name\",\"label\":\"service.name\",\"customLabel\":false,\"meta\":{\"type\":\"string\",\"esType\":\"keyword\"}},{\"columnId\":\"time_bucket\",\"fieldName\":\"time_bucket\",\"label\":\"time_bucket\",\"customLabel\":false,\"meta\":{\"type\":\"date\",\"esType\":\"date\"}}],\"timeField\":\"@timestamp\"}}}},\"internalReferences\":[{\"type\":\"index-pattern\",\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"name\":\"textBasedLanguages-datasource-layer-dff72890-454e-46e0-bdcf-9a6f1066ee7f\"}],\"adHocDataViews\":{\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\":{\"id\":\"19cb0b2e7eb3ca248a021621e488086046aa941a4abf4719be01020f25e9ae54\",\"title\":\"metrics-generic.otel-default\",\"timeFieldName\":\"@timestamp\",\"sourceFilters\":[],\"type\":\"esql\",\"fieldFormats\":{},\"runtimeFieldMap\":{},\"allowNoIndex\":false,\"name\":\"metrics-generic.otel-default\",\"allowHidden\":false,\"managed\":false}}},\"visualizationType\":\"lnsXY\",\"version\":1,\"type\":\"lens\"}},\"panelIndex\":\"9a10017c-413e-4e47-a796-1c51d5151c5e\",\"gridData\":{\"y\":31,\"x\":0,\"w\":48,\"h\":14,\"i\":\"9a10017c-413e-4e47-a796-1c51d5151c5e\"}}]","timeRestore":false,"title":"Golden Signals Overview"},"coreMigrationVersion":"8.8.0","created_at":"2026-01-11T20:10:16.952Z","created_by":"u_4aX6zCpfxbpA-y1xrGZ0lELEqt2anHwORyF1rZE1AyE_0","id":"b95664f2-294b-44e0-928a-d697bc91f4e2","managed":false,"references":[],"type":"dashboard","typeMigrationVersion":"10.3.0","updated_at":"2026-01-11T20:19:43.254Z","updated_by":"u_4aX6zCpfxbpA-y1xrGZ0lELEqt2anHwORyF1rZE1AyE_0","version":"WzExMzE0LDFd"}
{"excludedObjects":[],"excludedObjectsCount":0,"exportedCount":3,"missingRefCount":0,"missingReferences":[]}